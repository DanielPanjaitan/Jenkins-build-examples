{"name":"Jenkins-build-examples","tagline":"build examples of java and php projects with ant and gradle","body":"#Jenkins \r\n\r\n## Table of contents\r\n\r\n<!-- MarkdownTOC depth=3 -->\r\n\r\n- Installation auf Ubuntu 14.03.2 LTS (Codename: trusty64)\r\n    - [Installation][installation]\r\n        - prerequisites\r\n        - install Jenkins\r\n        - some usefull notes\r\n        - start configuration\r\n        - jenkins browser commands\r\n        - workaround for svn connection problems\r\n        - fixing timezone-differences\r\n    - [JavaScript WebdriverIO-Testrunner with Mocha][javascript]\r\n        - Plugins in Jenkins IDE required\r\n        - Packages to install globally on jenkins server\r\n        - fixing xunit bug in webdriverio (not fixed by: 2.Oktober 2015)\r\n        - configure jenkins IDE\r\n        - create build project\r\n        - Source-Code-Managment\r\n        - Post-Build-Aktionen\r\n    - [Testing with Mocha(Chai), WebdriverIO and PhantomJS][phantomjs]\r\n        - Jenkins configuration\r\n        - Configure Build\r\n        - the respective config file `wdio.conf.js`\r\n        - Testing with ES6 generators (will reduce the callback-hell... ;))\r\n        - the results will be published in `/tests/results/*.xml`\r\n- [PHP][php]\r\n    - [Ant Version][phpant]\r\n        - install phpunit\r\n        - install Ant if not done by Jenkins\r\n        - otherwise go to Jenkins and configure Ant-Installation\r\n- Plugins for php\r\n    - [PHPunit][phpunit]\r\n        - installation on server\r\n        - jenkins plugin to visualize\r\n        - ant target in `build.xml`\r\n        - configuration file (`/phpunit.xml`)\r\n        - jenkins post-build job configuration\r\n    - [PHP_CodeSniffer][phpcs]\r\n        - installation on server\r\n        - check which coding standards are installed\r\n        - jenkins plugin to visualize\r\n        - ant target in `build.xml`\r\n        - configuration file (under `build/ruleset.xml`)\r\n        - jenkins post-build job configuration\r\n    - [PHP_loc - lines of code][phploc]\r\n        - installation on server\r\n        - jenkins plugin to visualize\r\n        - ant target in `build.xml`\r\n        - jenkins post-build job configuration\r\n    - [PHP_Depend][phpdepend]\r\n        - installation on server\r\n        - jenkins plugin to visualize\r\n        - ant target in `build.xml`\r\n        - jenkins post-build job configuration\r\n        - integrate Jdependend SVG reports\r\n    - [PHPMD - PHP Mess Detector][phpmd]\r\n        - installation on server\r\n        - jenkins plugin to visualize\r\n        - ant target in `build.xml`\r\n        - configuration file (under `build/phpmd.xml`)\r\n        - jenkins post-build job configuration\r\n    - [PHPCPD - Copy-Paste-Detector][phpcpd]\r\n        - installation on server\r\n        - jenkins plugin to visualize\r\n        - ant target in `build.xml`\r\n        - jenkins post-build job configuration\r\n    - [PHP_dox][phpdox]\r\n        - installation on server\r\n        - jenkins plugin to visualize\r\n        - ant target in `build.xml`\r\n        - configuration file (under `build/phpdox.xml`)\r\n        - jenkins post-build job configuration\r\n    - PHP_CodeBrowser (not in use!)\r\n    - [PHPMetrics][phpmetrics]\r\n        - installation on server\r\n        - jenkins plugin to visualize\r\n        - ant target in `build.xml`\r\n        - jenkins post-build job configuration\r\n    - [complete working solution `build.xml`][phpcompleteant]\r\n    - [Gradle Version][phpcompletegradle]\r\n- [Java][java]\r\n    - [Ant Version][javaant]\r\n    - download following .jar\r\n    - ISSUES\r\n        - [full `build.xml`][javacompleteant]\r\n        - [full `build.gradle`][javacompletegradle]\r\n\r\n<!-- /MarkdownTOC -->\r\n\r\n\r\n# Installation auf Ubuntu 14.03.2 LTS (Codename: trusty64)\r\n\r\n## Installation[installation]\r\n\r\n### prerequisites\r\n\r\nJDK and JRE \r\n        \r\n    java -version\r\n    java version \"1.7.0_79\"\r\n    OpenJDK Runtime Environment (IcedTea 2.5.6) (7u79-2.5.6-0ubuntu1.14.04.1)\r\n    OpenJDK 64-Bit Server VM (build 24.79-b02, mixed mode)\r\n        \r\ndownload from http://openjdk.java.net/install/\r\n        \r\n    sudo apt-get install openjdk-7-jre\r\n    sudo apt-get install openjdk-7-jdk\r\n        \r\n### install Jenkins \r\n([see website](https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+on+Ubuntu))  \r\n        \r\n    wget -q -O - https://jenkins-ci.org/debian/jenkins-ci.org.key | sudo apt-key add -\r\n    sudo sh -c 'echo deb http://pkg.jenkins-ci.org/debian binary/ > /etc/apt/sources.list.d/jenkins.list'\r\n    sudo apt-get update\r\n    sudo apt-get install jenkins\r\n    \r\n### some usefull notes    \r\nJenkins will be launched as a aemon up on start. See `etc/init.d/jenkins` for more details\r\nThe 'jenkins' user is created to run this service\r\n**Log files** will be placed in `/var/log/jenkins/jenkins.log`. Check this if you need troubleshooting Jenkins\r\n`/etc/default/jenkins` will capture configuration parameters for the launch like e.g. `JENKINS_HOME`\r\n    \r\n### start configuration\r\nBy default, Jenkins will listen to port **8080** (e.g. http://jenkins-test.local:8080)\r\nAccess this port with your browser to **start the configuration**\r\n    \r\n### jenkins browser commands\r\n    \r\n    http://jenkins-installation:8080/restart\r\n\r\n    http://jenkins-installation:8080/exit\r\n\r\n    http://jenkins-installation:8080/systemInfo\r\n        \r\n### workaround for svn connection problems\r\n\r\n    sudo nano /etc/init.d/jenkins\r\n        \r\nlook for the following lines\r\n        \r\n    # --user in daemon doesn't prepare environment variables like HOME, USER, LOGNAME or USERNAME,\r\n    # so we let su do so for us now\r\n    $SU -l $JENKINS_USER --shell=/bin/bash -c \"$DAEMON $DAEMON_ARGS -- $JAVA $JAVA_ARGS -jar $JENKINS_WAR $JENKINS_ARGS\" || return 2\r\n            \r\nthe following should be inserted by you: `-Djsse.enableSNIExtension=false` so you get:\r\n            \r\n    $SU -l $JENKINS_USER --shell=/bin/bash -c \"$DAEMON $DAEMON_ARGS -- $JAVA $JAVA_ARGS -jar -Djsse.enableSNIExtension=false $JENKINS_WAR $JENKINS_ARGS\" || return 2\r\n            \r\n### fixing timezone-differences \r\n\r\n    sudo nano /etc/default/jenkins\r\n            \r\ninsert the following there:\r\n            \r\n    JAVA_ARGS=\"-Dorg.apache.commons.jelly.tags.fmt.timeZone=Europe/Berlin\"\r\n            \r\n## JavaScript WebdriverIO-Testrunner with Mocha[javascript]\r\n            \r\n### Plugins in Jenkins IDE required\r\n    \r\n* Email extension\r\n* NodeJS\r\n* JUnit\r\n\r\n### Packages to install globally on jenkins server\r\n* NodeJS\r\n* npm\r\n\r\n    sudo apt-get update\r\n    sudo apt-get install nodejs\r\n    sudo apt-get install npm\r\n\r\nUnfortunately there is a conflict with another package from Ubuntu, therefor the NodeJS executable is named nodejs instead of node.\r\nKeep that in mind as you are running software, or change this with:\r\n\r\n    sudo ln -s \"$(which nodejs)\" /usr/bin/node\r\n        \r\nwith npm installed install the following modules\r\n\r\n    sudo npm install selenium-standalone@latest -g\r\n    sudo selenium-standalone install\r\n\r\nto start the selenium-server on server startup create a symbolic link in `/etc/init.d` and configure it to run\r\n        \r\n    sudo ln -s /usr/local/bin/selenium-standalone /etc/init.d/\r\n    sudo update-rc.d selenium-standalone defaults\r\n\r\nNOTE!!! This caused the following error in my vagrant:\r\n\r\n    ==> default: Mounting shared folders...\r\n        default: /vagrant => /Volumes/sebastian_TC/VM-Box-Versionen/Jenkins_Test\r\n        Failed to mount folders in Linux guest. This is usually because\r\n        the \"vboxsf\" file system is not available. Please verify that\r\n        the guest additions are properly installed in the guest and\r\n        can work properly. The command attempted was:\r\n        \r\n        mount -t vboxsf -o uid=`id -u www-data`,gid=`getent group www-data | cut -d: -f3`,dmode=777,fmode=777 vagrant /vagrant\r\n        mount -t vboxsf -o uid=`id -u www-data`,gid=`id -g www-data`,dmode=777,fmode=777 vagrant /vagrant\r\n        \r\n        The error output from the last command was:\r\n        \r\n        stdin: is not a tty\r\n        /sbin/mount.vboxsf: mounting failed with the error: No such device\r\n        \r\n        \r\non next startup selenium-server will be up automatically\r\n\r\n    sudo npm install jasmine webdriverio wdio-jasmine-framework phantomjs -g\r\n        \r\n### fixing xunit bug in webdriverio (not fixed by: 2.Oktober 2015)\r\n\r\n    sudo nano /var/lib/jenkins/tools/jenkins.plugins.nodejs.tools.NodeJSInstallation/Node-Default/lib/node_modules/webdriverio/lib/reporter/xunit.js\r\n        \r\nlook for lines:\r\n        \r\n    self.write(tag('testcase', {\r\n                name: test.title,\r\n                disabled: test.pending,\r\n                time: test.time / 1000,\r\n                id: test.id,\r\n                file: test.file,\r\n                status: Object.getOwnPropertyNames(test.err).length === 0 ? 'passed' : 'failed',\r\n                    \r\nand insert `test.err &&` at status\r\n \r\n    self.write(tag('testcase', {\r\n                name: test.title,\r\n                disabled: test.pending,\r\n                time: test.time / 1000,\r\n                id: test.id,\r\n                file: test.file,\r\n                status: test.err && Object.getOwnPropertyNames(test.err).length === 0 ? 'passed' : 'failed',\r\n                    \r\n### configure jenkins IDE\r\n\r\nconfigure jenkins -> system configuration\r\n\r\n  1. NodeJS installation\r\n  Choose Installation `NodeJS 4.1.1`\r\n  Global npm packages to install `webdriverio jasmine wdio-jasmine-framework phantomjs`\r\n  \r\n  2. Jenkins Location\r\n  Jenkins URL e.g. http://192.168.56.103:8080/\r\n  Email of systemadministrator \r\n  \r\n  3. Extended E-mail Notification\r\n  SMTP server \r\n  Default Subject `$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS!`\r\n  Default Content `${JELLY_SCRIPT,template=\"html\"}`\r\n  \r\n### create build project\r\n\r\nEnter name and choose \"Free Style\" project\r\n\r\n### Source-Code-Managment\r\n-> Subversion\r\n    Repository URL \r\n    Credentials \r\n-> Buildumgebung\r\n    Provide Node & npm bin/folder to PATH ...check...\r\n    Installation ...choose the recently created...\r\n-> Buildverfahren\r\n    Shell ausführen\r\n~~`npm install`~~ (dunno need because we installed everything globally before)\r\n~~`selenium-standalone start &`~~ (selenium-server is already running at server-startup)\r\n      `wdio tests/resources/wdio.conf.js`\r\n    \r\n### Post-Build-Aktionen\r\n-> Veröffentliche JUNIT-Testergebnisse\r\n    Testberichte in XML-Format `**/tests/results/*.xml`\r\n\r\n-> Editable Email Notification\r\n    Project recipient List  `$DEFAULT_RECIPIENTS`\r\n    Project Reply-To List `$DEFAULT_REPLYTO`\r\n    Content Type `Default Content Type`\r\n    Default Subject `$DEFAULT_SUBJECT`\r\n    Default Content `$DEFAULT_CONTENT`\r\n    \r\n    \r\n## Testing with Mocha(Chai), WebdriverIO and PhantomJS[phantomjs]\r\n\r\n### Jenkins configuration\r\n\r\nNodeJS configuration\r\n\r\nNodeJS Version 4.1.1\r\n\r\nGlobal npm packages to install\r\n\r\n    webdriverio mocha chai wdio-mocha-framework phantomjs\r\n    \r\n    if you want to use Jasmine\r\n    \r\n    jasmine wdio-jasmine-framework \r\n    \r\nShell command (if selenium is no installed on server)\r\n    \r\n    Selenium-standalone install\r\n    \r\n    sudo npm install selenium-standalone -g\r\n    sudo selenium-standalone install\r\n    \r\n### Configure Build\r\n\r\nFolder structure of repository\r\n \r\n        tests\r\n            resources\r\n                wdio.conf.js\r\n            scripts\r\n                webdriverio\r\n                    diomega.spec.js\r\n\r\nso the shell command should look like this:\r\n        \r\n        wdio tests/resources/wdio.conf.js\r\n\r\n### the respective config file `wdio.conf.js`\r\n\r\n```javascript\r\nexports.config = {\r\n    \r\n    host: '192.168.56.103',\r\n    port: 4444,\r\n    path: '/wd/hub',\r\n\r\n    specs: [\r\n        './tests/scripts/webdriverio/**/*.js',\r\n        './tests/scripts/webdriverio/*.js'\r\n    ],\r\n    exclude: [\r\n        // 'path/to/excluded/files'\r\n    ],\r\n    capabilities: [{\r\n        browserName: 'phantomjs',\r\n        'phantomjs.binary.path': '/usr/local/bin/phantomjs'\r\n    }],\r\n    logLevel: 'verbose',\r\n    coloredLogs: true,\r\n    screenshotPath: './errorShots/',\r\n    baseUrl: 'http://the-internet.herokuapp.com',\r\n    waitforTimeout: 20000,\r\n    framework: 'mocha',\r\n    reporter: 'xunit',\r\n    reporterOptions: {\r\n        outputDir: './tests/results/'\r\n    },\r\n    //onPrepare: function() {\r\n        // do something\r\n    //},\r\n    before: function(done) {\r\n        console.log('before...lets get started');\r\n    },\r\n    after: function(failures, pid) {\r\n        console.log('after...stop everything');\r\n    },\r\n    //onComplete: function() {\r\n        // do something\r\n    //}\r\n};\r\n```\r\n\r\n### Testing with ES6 generators (will reduce the callback-hell... ;))\r\n\r\nThe wdio test runner supports ES6 generators.\r\nThe following code therefor works as intended (with `baseUrl: 'http://the-internet.herokuapp.com'` set in wdio.config.js\r\n\r\n```javascript\r\n\"use strict\"\r\nvar assert = require('assert');\r\n\r\ndescribe('checkboxes', function() {\r\n\r\n    it('checkbox 2 should be enabled', function*() {\r\n        yield browser.url('/checkboxes');\r\n        yield browser.isSelected('#checkboxes input:last-Child').then(function(isSelected) {\r\n            assert.equal(isSelected, true);\r\n            /*expect(isSelected).toBe(true);*/\r\n        });\r\n    });\r\n\r\n    it('checkbox 1 should be enabled after clicking on it', function*() {\r\n        yield browser.url('/checkboxes');\r\n        yield browser.isSelected('#checkboxes input:first-Child').then(function(isSelected) {\r\n            assert.equal(isSelected, false);\r\n        });\r\n        yield browser.click('#checkboxes input:first-Child');\r\n        yield browser.isSelected('#checkboxes input:first-Child').then(function(isSelected) {\r\n            assert.equal(isSelected, true);\r\n        });\r\n    });\r\n\r\n});\r\n\r\n```\r\n\r\n### the results will be published in `/tests/results/*.xml`\r\n\r\nsee `wdio.conf.js`\r\nso post-build-actions will be\r\n\r\npublish JUnit results\r\n\r\n`**/tests/results/*.xml`\r\n\r\n\r\n#### problems with phantomjs\r\n\r\nif you try to e.g. .click() an element and the following error ocurrs\r\n `Problem: Element is not currently visible and may not be manipulated`\r\nthis is a webdriverIO bug, that meand that the element you tried to click is currently not visible in phantomjs, because of the default window size\r\n   \r\nin this case try a higher window size before launching your tests\r\ne.g.:\r\n\r\n```javascript\r\ndescribe('a click event', function () {\r\n    console.log('test....starts now....');\r\n    it('should open a new page', function(done) {\r\n        browser\r\n            .setViewportSize({\r\n                width: 1024,\r\n                height: 768\r\n            })\r\n            .windowHandleSize().then(function(size) {\r\n                console.log('...this is the size',size);\r\n            })\r\n            .click('.ac-gn-link-mac').pause(2000).getTitle().then(function (title) {\r\n                console.log(title);\r\n                expect(title).toEqual('Mac – Apple (DE)');\r\n                done();\r\n            });\r\n    })\r\n});\r\n```\r\n\r\n# PHP[php]\r\n\r\n## Ant Version[phpant]\r\n\r\n### install phpunit\r\n\r\n### install Ant if not done by Jenkins\r\n\r\n    sudo apt-get install ant\r\n        \r\n### otherwise go to Jenkins and configure Ant-Installation        \r\n        \r\nconfigure Jenkins -> configure system -> Ant -> Ant installations -> install automatically\r\n\r\nconfigure jenkins -> configure plugins -> install Ant plugin\r\n                \r\n\r\n            \r\n#### editable email notifications\r\n\r\ninstall plugin to send email notifications\r\n\r\n---\r\n\r\n# Plugins for php\r\n\r\n## PHPunit[phpunit]\r\n\r\n### installation on server\r\n```sh\r\n\r\n    curl -sS https://getcomposer.org/installer | php\r\n    \r\n    sudo mv composer.phar /usr/local/bin/composer\r\n    \r\n    composer global require \"phpunit/phpunit=5.0.*\"\r\n    \r\n    //sudo nano ~/.bashrc\r\n    \r\n    //export PATH=$PATH:~/.composer/vendor/bin/\r\n```\r\n\r\n\r\n#### upgrade php to 5.6\r\n    \r\n```sh\r\n    sudo apt-get -y update\r\n    \r\n    add-apt-repository ppa:ondrej/php5-5.6\r\n    \r\n    sudo apt-get -y update\r\n    \r\n    sudo apt-get -y install php5\r\n    \r\n    php -v //to verify the version\r\n```\r\n\r\n#### enable php-code-coverage like 'clover'\r\n\r\nClover provides the metrics you need to better balance the effort between writing code that does stuff, and code that tests stuff.\r\n\r\nif not, install xdebug for phpunit\r\n        \r\n    sudo pecl install xdebug\r\n        \r\nand add this to php.ini\r\n\r\n    zend_extension=/usr/lib/php5/20121212/xdebug.so\r\n    \r\n    sudo service apache2 restart\r\n        \r\nif you encounter **The Zend Engine API version 220131226 which is installed, is newer.** then do:\r\n\r\ngo to ([http://xdebug.org/wizard.php](http://xdebug.org/wizard.php))\r\npaste in `php -i` output and let it analyse this\r\nfor me it produced these instructions\r\n\r\nDownload\r\n \r\n    wget http://xdebug.org/files/xdebug-2.4.0beta1.tgz\r\n\r\nUnpack the downloaded file with \r\n\r\n    tar -xvzf xdebug-2.4.0beta1.tgz\r\nrun:    \r\n     \r\n    cd xdebug-2.4.0beta1\r\n    phpize (See the FAQ if you don't have phpize.\r\n        \r\nAs part of its output it should show:\r\n        \r\n    Configuring for:\r\n    ...\r\n    Zend Module Api No:      20131226\r\n    Zend Extension Api No:   220131226\r\n\r\nIf it does not, you are using the wrong phpize. Please follow this FAQ entry and skip the next step.\r\n        \r\nRun: \r\n        \r\n    ./configure\r\n    make\r\n    cp modules/xdebug.so /usr/lib/php5/20131226\r\n    sudo nano /etc/php5/cli/php.ini\r\n        \r\nand add the line\r\n\r\n    zend_extension = /usr/lib/php5/20131226/xdebug.so\r\n\r\n### jenkins plugin to visualize\r\n\r\n[XUnit](http://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin)\r\n\r\n### ant target in `build.xml`\r\n\r\n```xml        \r\n    <!--perform phpunit tests with coverage report-->\r\n\r\n    <target name=\"phpunit\"\r\n            unless=\"phpunit.done\"\r\n            depends=\"prepare\"\r\n            description=\"Run unit tests with PHPUnit\">\r\n        <exec executable=\"${phpunit}\" resultproperty=\"result.phpunit\" taskname=\"phpunit\">\r\n            <arg value=\"--configuration\"/>\r\n            <arg path=\"${basedir}/phpunit.xml\"/>\r\n        </exec>\r\n\r\n        <property name=\"phpunit.done\" value=\"true\"/>\r\n    </target>\r\n\r\n    <!--perform phpunit tests without coverage report-->\r\n\r\n    <target name=\"phpunit-no-coverage\"\r\n            unless=\"phpunit.done\"\r\n            depends=\"prepare\"\r\n            description=\"Run unit tests with PHPUnit (without generating code coverage reports)\">\r\n        <exec executable=\"${phpunit}\" failonerror=\"true\" taskname=\"phpunit\">\r\n            <arg value=\"--configuration\"/>\r\n            <arg path=\"${basedir}/phpunit.xml\"/>\r\n            <arg value=\"--no-coverage\"/>\r\n        </exec>\r\n\r\n        <property name=\"phpunit.done\" value=\"true\"/>\r\n    </target>\r\n```\r\n\r\n### configuration file (`/phpunit.xml`)\r\n\r\n```xml\r\n    <?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n    <phpunit\r\n            backupGlobals=\"false\"\r\n            backupStaticAttributes=\"false\"\r\n            strict=\"true\"\r\n            verbose=\"true\">\r\n        <testsuites>\r\n            <testsuite name=\"ProjectName\">\r\n                <directory suffix=\"Test.php\">tests/</directory>\r\n                <directory suffix=\"Test.php\">tests/</directory>\r\n            </testsuite>\r\n        </testsuites>\r\n\r\n        <logging>\r\n            <log type=\"coverage-html\" target=\"coverage\"/>\r\n            <log type=\"coverage-clover\" target=\"reports/clover.xml\"/>\r\n            <log type=\"coverage-crap4j\" target=\"reports/crap4j.xml\"/>\r\n            <log type=\"junit\" target=\"reports/junit.xml\" logIncompleteSkipped=\"false\"/>\r\n        </logging>\r\n\r\n        <filter>\r\n            <whitelist addUncoveredFilesFromWhitelist=\"true\">\r\n                <directory suffix=\".php\">src</directory>\r\n                <exclude>\r\n                    <file>src/bootstrap.php</file>\r\n                </exclude>\r\n            </whitelist>\r\n        </filter>\r\n    </phpunit>\r\n```\r\n\r\n### jenkins post-build job configuration\r\n\r\nPublish JUnit results: `**/logs/junit.xml`\r\nPublish Clover results:  **Clover XML Location** `build/clover.xml`\r\n\r\n\r\n\r\n---\r\n\r\n\r\n## PHP_CodeSniffer[phpcs]\r\n\r\n### installation on server\r\n\r\n    sudo pear install PHP_CodeSniffer\r\n        \r\n    //command: phpcs\r\n        \r\n### check which coding standards are installed\r\n\r\n    phpcs -i\r\n        \r\n    //The installed coding standards are Squiz, PSR2, PSR1, PHPCS, Zend, PEAR and MySource\r\n        \r\n### jenkins plugin to visualize\r\n\r\n[Checkstyle](http://wiki.jenkins-ci.org/display/JENKINS/Checkstyle+Plugin)\r\n\r\n### ant target in `build.xml`\r\n```xml\r\n    <!--find coding standard violations using CodeSniffer (command line version)-->\r\n\r\n    <target name=\"phpcs\"\r\n            unless=\"phpcs.done\"\r\n            description=\"Find coding standard violations using PHP_CodeSniffer and print human readable output. Intended for usage on the command line before committing.\">\r\n        <exec executable=\"${phpcs}\" taskname=\"phpcs\">\r\n            <arg value=\"--standard=PSR2\" />\r\n            <arg value=\"&#45;&#45;standard=PHPCS\" />\r\n            <arg value=\"&#45;&#45;standard=Zend\" />\r\n            <arg value=\"&#45;&#45;standard=PEAR\" />\r\n            <arg value=\"&#45;&#45;standard=MySource\" />\r\n            <arg value=\"&#45;&#45;standard=PSR1\" />\r\n            <arg value=\"&#45;&#45;standard=Squiz\" />\r\n            <arg value=\"--extensions=php\" />\r\n            <arg value=\"--ignore=autoload.php\" />\r\n            <arg path=\"${basedir}/src\" />\r\n            <arg path=\"${basedir}/tests\" />\r\n        </exec>\r\n\r\n        <property name=\"phpcs.done\" value=\"true\"/>\r\n    </target>\r\n\r\n    <!--find coding standard violations usind CodeSniffer (jenkins)-->\r\n\r\n    <target name=\"phpcs-ci\"\r\n            unless=\"phpcs.done\"\r\n            depends=\"prepare\"\r\n            description=\"Find coding standard violations using PHP_CodeSniffer and log result in XML format. Intended for usage within a continuous integration environment.\">\r\n        <exec executable=\"${phpcs}\" output=\"/dev/null\" taskname=\"phpcs\">\r\n            <arg value=\"--report=checkstyle\" />\r\n            <arg value=\"--report-file=${basedir}/build/logs/checkstyle.xml\" />\r\n            <arg value=\"--standard=PSR2\" />\r\n            <arg value=\"&#45;&#45;standard=PHPCS\" />\r\n            <arg value=\"&#45;&#45;standard=Zend\" />\r\n            <arg value=\"&#45;&#45;standard=PEAR\" />\r\n            <arg value=\"&#45;&#45;standard=MySource\" />\r\n            <arg value=\"&#45;&#45;standard=PSR1\" />\r\n            <arg value=\"&#45;&#45;standard=Squiz\" />-->\r\n            <arg value=\"--extensions=php\" />\r\n            <arg value=\"--ignore=autoload.php\" />\r\n            <arg path=\"${basedir}/src\" />\r\n            <arg path=\"${basedir}/tests\" />\r\n        </exec>\r\n\r\n        <property name=\"phpcs.done\" value=\"true\"/>\r\n    </target>\r\n```\r\n\r\n### configuration file (under `build/ruleset.xml`)\r\n        \r\n        <?xml version=\"1.0\"?>\r\n        <ruleset name=\"name-of-your-coding-standard\">\r\n            <description>Description of your coding standard</description>\r\n        \r\n            <rule ref=\"Generic.PHP.DisallowShortOpenTag\"/>\r\n            <!-- ... -->\r\n        </ruleset>\r\n        \r\n### jenkins post-build job configuration\r\n\r\nCheckstyle: `**/build/logs/checkstyle.xml`\r\n\r\n---\r\n        \r\n## PHP_loc - lines of code[phploc]   \r\n   \r\n### installation on server   \r\n  \r\n    composer global require 'phploc/phploc=*'\r\n\r\n    //command: phploc\r\n        \r\n### jenkins plugin to visualize\r\n\r\n[Plot](http://wiki.jenkins-ci.org/display/JENKINS/Plot+Plugin)\r\n\r\n### ant target in `build.xml`\r\n```sh\r\n    <target name=\"phploc\"\r\n            unless=\"phploc.done\"\r\n            description=\"Measure project size using PHPLOC and print human readable output. Intended for usage on the command line.\">\r\n        <exec executable=\"${phploc}\" taskname=\"phploc\">\r\n            <arg value=\"--count-tests\" />\r\n            <arg path=\"${basedir}/src\" />\r\n            <arg path=\"${basedir}/tests\" />\r\n        </exec>\r\n\r\n        <property name=\"phploc.done\" value=\"true\"/>\r\n    </target>\r\n\r\n    <!--count lines of code (jenkins)-->\r\n\r\n    <target name=\"phploc-ci\"\r\n            unless=\"phploc.done\"\r\n            depends=\"prepare\"\r\n            description=\"Measure project size using PHPLOC and log result in CSV and XML format. Intended for usage within a continuous integration environment.\">\r\n        <exec executable=\"${phploc}\" taskname=\"phploc\">\r\n            <arg value=\"--count-tests\" />\r\n            <arg value=\"--log-csv\" />\r\n            <arg path=\"${basedir}/build/logs/phploc.csv\" />\r\n            <arg value=\"--log-xml\" />\r\n            <arg path=\"${basedir}/build/logs/phploc.xml\" />\r\n            <arg path=\"${basedir}/src\" />\r\n            <arg path=\"${basedir}/tests\" />\r\n        </exec>\r\n\r\n        <property name=\"phploc.done\" value=\"true\"/>\r\n    </target>\r\n```\r\n\r\n### jenkins post-build job configuration\r\n\r\nPlot:\r\n \r\n**data series file** `build/logs/phploc.csv`\r\n\r\n**load data from csv**\r\n\r\n---\r\n        \r\n## PHP_Depend[phpdepend]\r\n\r\n### installation on server   \r\n\r\n    composer global require 'pdepend/pdepend=*'\r\n        \r\n    //command: pdepend\r\n        \r\n### jenkins plugin to visualize\r\n\r\n[JDepend](http://wiki.jenkins-ci.org/display/JENKINS/JDepend+Plugin)\r\n\r\n### ant target in `build.xml`      \r\n```sh\r\n    <!--performs static code analysis on a given source base, the sum of some statements or code fragments found in the analyzed source-->\r\n\r\n    <target name=\"pdepend\"\r\n            unless=\"pdepend.done\"\r\n            depends=\"prepare\"\r\n            description=\"Calculate software metrics using PHP_Depend and log result in XML format. Intended for usage within a continuous integration environment.\">\r\n        <exec executable=\"${pdepend}\" taskname=\"pdepend\">\r\n            <arg value=\"--summary-xml=${basedir}/build/logs/jdepend.xml\" />\r\n            <arg value=\"--jdepend-xml=${basedir}/build/logs/jdepend.xml\" />\r\n            <arg value=\"--jdepend-chart=${basedir}/build/pdepend/dependencies.svg\" />\r\n            <arg value=\"--overview-pyramid=${basedir}/build/pdepend/overview-pyramid.svg\" />\r\n            <arg path=\"${basedir}/src\" />\r\n        </exec>\r\n\r\n        <property name=\"pdepend.done\" value=\"true\"/>\r\n    </target>\r\n```\r\n\r\n### jenkins post-build job configuration\r\n\r\nReport JDepend\r\n\r\n**Pre-generated JDepend File**: `build/logs/jdepend.xml`\r\n\r\n### integrate Jdependend SVG reports\r\n        \r\nin project description insert \r\n```html\r\n    <img type=\"image/svg+xml\" height=\"300\" src=\"ws/build/pdepend/overview-pyramid.svg\" width=\"500\"></img>\r\n    <img type=\"image/svg+xml\" height=\"300\" src=\"ws/build/pdepend/   dependencies.svg\" width=\"500\"></img>\r\n```\r\n\r\nJenkins is probably configured to text, therefor: \r\n\r\nconfigure jenkins -> global security -> change markup to html\r\n        \r\n---\r\n        \r\n## PHPMD - PHP Mess Detector[phpmd]\r\n\r\n[Clean Code Rules](http://phpmd.org/rules/cleancode.html)\r\n[Code Size Rules](http://phpmd.org/rules/codesize.html)\r\n[Controversial Rules](http://phpmd.org/rules/controversial.html)\r\n[Design Rules](http://phpmd.org/rules/design.html)\r\n[Naming Rules](http://phpmd.org/rules/naming.html)\r\n[Unused Code Rules](http://phpmd.org/rules/unusedcode.html)\r\n\r\n### installation on server  \r\n\r\n    composer global require 'phpmd/phpmd=*'\r\n                \r\n    //command: phpmd\r\n   \r\n### jenkins plugin to visualize\r\n\r\n[PMD](http://wiki.jenkins-ci.org/display/JENKINS/PMD+Plugin)\r\n\r\n### ant target in `build.xml`\r\n```xml        \r\n    <!--perform mess detection (command line version)-->\r\n\r\n    <target name=\"phpmd\"\r\n            unless=\"phpmd.done\"\r\n            description=\"Perform project mess detection using PHPMD and print human readable output. Intended for usage on the command line before committing.\">\r\n        <exec executable=\"${phpmd}\" taskname=\"phpmd\">\r\n            <arg path=\"${basedir}/src\" />\r\n            <arg value=\"text\" />\r\n            <arg path=\"${basedir}/phpmd.xml\" />\r\n        </exec>\r\n\r\n        <property name=\"phpmd.done\" value=\"true\"/>\r\n    </target>\r\n\r\n    <!--perform mess detection (jenkins)-->\r\n\r\n    <target name=\"phpmd-ci\"\r\n            unless=\"phpmd.done\"\r\n            depends=\"prepare\"\r\n            description=\"Perform project mess detection using PHPMD and log result in XML format. Intended for usage within a continuous integration environment.\">\r\n        <exec executable=\"${phpmd}\" taskname=\"phpmd\">\r\n            <arg path=\"${basedir}/src\" />\r\n            <arg value=\"xml\" />\r\n            <arg path=\"${basedir}/phpmd.xml\" />\r\n            <arg value=\"--reportfile\" />\r\n            <arg path=\"${basedir}/build/logs/pmd.xml\" />\r\n        </exec>\r\n\r\n        <property name=\"phpmd.done\" value=\"true\"/>\r\n    </target>\r\n```\r\n\r\n### configuration file (under `build/phpmd.xml`)\r\n```xml\r\n    <ruleset name=\"names-of-your-coding-standard\"\r\n             xmlns=\"http://pmd.sf.net/ruleset/1.0.0\"\r\n             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n             xsi:schemaLocation=\"http://pmd.sf.net/ruleset/1.0.0\r\n                          http://pmd.sf.net/ruleset_xml_schema.xsd\"\r\n             xsi:noNamespaceSchemaLocation=\"http://pmd.sf.net/ruleset_xml_schema.xsd\">\r\n        <description>Description of your coding standard</description>\r\n\r\n        <!--The Code Size Ruleset contains a collection of rules that find code size related problems.-->\r\n        <rule ref=\"rulesets/codesize.xml/CyclomaticComplexity\" />\r\n        <rule ref=\"rulesets/codesize.xml/ExcessiveMethodLength\" />\r\n        <rule ref=\"rulesets/codesize.xml/ExcessiveClassLength\" />\r\n        <rule ref=\"rulesets/codesize.xml/ExcessiveParameterList\" />\r\n        <rule ref=\"rulesets/codesize.xml/ExcessivePublicCount\" />\r\n        <rule ref=\"rulesets/codesize.xml/TooManyFields\" />\r\n        <rule ref=\"rulesets/codesize.xml/TooManyMethods\" />\r\n        <rule ref=\"rulesets/codesize.xml/TooManyPublicMethods\" />\r\n        <rule ref=\"rulesets/codesize.xml/ExcessiveClassComplexity\" />\r\n\r\n        <!--The Unused Code Ruleset contains a collection of rules that find unused code.-->\r\n        <rule ref=\"rulesets/unusedcode.xml/UnusedPrivateField\" />\r\n        <rule ref=\"rulesets/unusedcode.xml/UnusedLocalVariable\" />\r\n        <rule ref=\"rulesets/unusedcode.xml/UnusedPrivateMethod\" />\r\n        <rule ref=\"rulesets/unusedcode.xml/UnusedFormalParameter\" />\r\n\r\n        <!--The Clean Code ruleset contains rules that enforce a clean code base. This includes rules from SOLID and object calisthenics.-->\r\n        <rule ref=\"rulesets/cleancode.xml/BooleanArgumentFlag\" />\r\n        <rule ref=\"rulesets/cleancode.xml/ElseExpression\" />\r\n        <rule ref=\"rulesets/cleancode.xml/StaticAccess\" />\r\n\r\n        <!--The Code Size Ruleset contains a collection of rules that find software design related problems.-->\r\n        <rule ref=\"rulesets/design.xml/ExitExpression\" />\r\n        <rule ref=\"rulesets/design.xml/EvalExpression\" />\r\n        <rule ref=\"rulesets/design.xml/GotoStatement\" />\r\n        <rule ref=\"rulesets/design.xml/NumberOfChildren\" />\r\n        <rule ref=\"rulesets/design.xml/DepthOfInheritance\" />\r\n        <rule ref=\"rulesets/design.xml/CouplingBetweenObjects\" />\r\n\r\n        <!--The Naming Ruleset contains a collection of rules about names - too long, too short, and so forth.-->\r\n        <rule ref=\"rulesets/naming.xml/ShortVariable\" />\r\n        <rule ref=\"rulesets/naming.xml/LongVariable\" />\r\n        <rule ref=\"rulesets/naming.xml/ShortMethodName\" />\r\n        <rule ref=\"rulesets/naming.xml/ConstructorWithNameAsEnclosingClass\" />\r\n        <rule ref=\"rulesets/naming.xml/ConstantNamingConventions\" />\r\n        <rule ref=\"rulesets/naming.xml/BooleanGetMethodName\" />\r\n\r\n        <!--This ruleset contains a collection of controversial rules.-->\r\n        <rule ref=\"rulesets/controversial.xml/Superglobals\" />\r\n        <rule ref=\"rulesets/controversial.xml/CamelCaseClassName\" />\r\n        <rule ref=\"rulesets/controversial.xml/CamelCasePropertyName\" />\r\n        <rule ref=\"rulesets/controversial.xml/CamelCaseMethodName\" />\r\n        <rule ref=\"rulesets/controversial.xml/CamelCaseParameterName\" />\r\n        <rule ref=\"rulesets/controversial.xml/CamelCaseVariableName\" />\r\n\r\n    </ruleset>\r\n```\r\n\r\n### jenkins post-build job configuration\r\n\r\nReport PMD anylsis\r\n\r\n**filename PMD results**: `build/logs/pmd.xml`\r\n        \r\n---\r\n        \r\n## PHPCPD - Copy-Paste-Detector[phpcpd]\r\n\r\n### installation on server  \r\n        \r\n    composer global require \"sebastian/phpcpd=*\"\r\n        \r\n    //command: phpcpd\r\n        \r\n### jenkins plugin to visualize\r\n\r\n[Duplicate Code Scanner Plug-in](http://wiki.jenkins-ci.org/x/X4IuAg)\r\n\r\n### ant target in `build.xml`\r\n```xml        \r\n    <!--find duplicate code (command line version)-->\r\n\r\n    <target name=\"phpcpd\"\r\n            unless=\"phpcpd.done\"\r\n            description=\"Find duplicate code using PHPCPD and print human readable output. Intended for usage on the command line before committing.\">\r\n        <exec executable=\"${phpcpd}\" taskname=\"phpcpd\">\r\n            <arg path=\"${basedir}/src\" />\r\n        </exec>\r\n\r\n        <property name=\"phpcpd.done\" value=\"true\"/>\r\n    </target>\r\n\r\n    <!--find duplicate code (jenkins)-->\r\n\r\n    <target name=\"phpcpd-ci\"\r\n            unless=\"phpcpd.done\"\r\n            depends=\"prepare\"\r\n            description=\"Find duplicate code using PHPCPD and log result in XML format. Intended for usage within a continuous integration environment.\">\r\n        <exec executable=\"${phpcpd}\" taskname=\"phpcpd\">\r\n            <arg value=\"--log-pmd\" />\r\n            <arg path=\"${basedir}/build/logs/pmd-cpd.xml\" />\r\n            <arg path=\"${basedir}/src\" />\r\n        </exec>\r\n\r\n        <property name=\"phpcpd.done\" value=\"true\"/>\r\n    </target>\r\n```\r\n\r\n### jenkins post-build job configuration\r\n\r\nReport Duplicate Code Scanner results\r\n\r\n**filename**: `**/build/logs/pmd-cpd.xml`\r\n        \r\n---\r\n        \r\n## PHP_dox[phpdox]\r\n\r\n### installation on server  \r\n        \r\n    wget https://github.com/theseer/phpdox/releases/download/0.8.0/phpdox-0.8.0.phar\r\n        \r\n    chmod +x phpdox-0.8.0.phar\r\n        \r\n    sudo mv phpdox-0.8.0.phar /usr/bin/phpdox\r\n        \r\n    //if not installed:\r\n    sudo apt-get install php5-xsl\r\n        \r\n### jenkins plugin to visualize\r\n\r\n[HTML publisher](http://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin)\r\n\r\n### ant target in `build.xml`\r\n```xml        \r\n    <target name=\"phpdox\"\r\n            unless=\"phpdox.done\"\r\n            depends=\"phploc-ci,phpcs-ci,phpmd-ci\"\r\n            description=\"Generate project documentation using phpDox\">\r\n        <exec executable=\"${phpdox}\" dir=\"${basedir}\" taskname=\"phpdox\"/>\r\n\r\n        <property name=\"phpdox.done\" value=\"true\"/>\r\n    </target>\r\n```\r\n\r\n### configuration file (under `build/phpdox.xml`)\r\n```xml\r\n    <?xml version=\"1.0\"?>\r\n    <phpdox xmlns='http://xml.phpdox.net/config'>\r\n        <project name=\"name-of-project\" source=\"${basedir}/src\" workdir=\"${basedir}/phpdox\">\r\n            <collector publiconly=\"false\">\r\n                <include mask=\"*.php\" />\r\n            </collector>\r\n\r\n            <generator output=\"${basedir}/reports/api\">\r\n                <enrich base=\"${basedir}/reports\">\r\n                    <source type=\"build\" />\r\n                    <source type=\"checkstyle\" />\r\n                    <source type=\"pmd\" />\r\n                    <source type=\"phploc\" />\r\n                </enrich>\r\n                <build engine=\"html\" enabled=\"true\">\r\n                    <file extension=\"html\" />\r\n                </build>\r\n            </generator>\r\n        </project>\r\n    </phpdox>\r\n```\r\n\r\n### jenkins post-build job configuration\r\n\r\nPublish HTML reports\r\n\r\n**directory**: `build/api`\r\n**index page**: `index.html`\r\n**report title**: `HTML Report`\r\n        \r\n---\r\n        \r\n## PHP_CodeBrowser (not in use!)\r\n        \r\n    composer global require \"mayflower/php-codebrowser=~1.1\"\r\n        \r\n    //command: phpcb\r\n        \r\n---\r\n\r\n## PHPMetrics[phpmetrics]\r\n\r\n### installation on server  \r\n\r\n    composer global require \"halleck45/phpmetrics\"\r\n        \r\n    //command: phpmetrics\r\n        \r\n### jenkins plugin to visualize\r\n\r\n- for phpmetrics.xml option:\r\n   [Plot](http://wiki.jenkins-ci.org/display/JENKINS/Plot+Plugin)\r\n\r\n   **data series file** `build/logs/phpmetrics.xml`\r\n\r\n   **load data from xml using xpath**\r\n   **xpath result type** number\r\n\r\n- for violations.xml option:\r\n   [violation](http://wiki.jenkins-ci.org/display/JENKINS/Violations)\r\n\r\n   under pmd `build/logs/violations.xml`\r\n\r\n- for phpmetrics.html option:\r\n   [sidebar-link](http://wiki.jenkins-ci.org/display/JENKINS/Sidebar-Link+Plugin)\r\n\r\n### ant target in `build.xml`\r\n\r\n```xml        \r\n    <!--generate documentation-->\r\n\r\n    <target name=\"phpmetrics\"\r\n            unless=\"phpmetrics.done\"\r\n            description=\"generate phpmetrics reports\">\r\n        <exec executable=\"${phpmetrics}\" taskname=\"phpmetrics\">\r\n            <arg value=\"--report-xml=${basedir}/build/logs/phpmetrics.xml\"/>\r\n            <arg value=\"--violations-xml=${basedir}/build/logs/violations.xml\"/>\r\n            <arg value=\"--report-html=${basedir}/build/logs/quality.html\"/>\r\n            <arg path=\"${basedir}/src\"/>\r\n        </exec>\r\n\r\n        <property name=\"phpmetrics.done\" value=\"true\"/>\r\n    </target>\r\n```\r\n\r\n### jenkins post-build job configuration\r\n        \r\n###### for phpmetrics.xml option:\r\n   Plot\r\n\r\n   **data series file** `build/logs/phpmetrics.xml`\r\n\r\n   **load data from xml using xpath**\r\n   **xpath result type** number\r\n\r\n###### for violations.xml option:\r\n   Violation\r\n\r\n   under pmd `build/logs/violations.xml`\r\n\r\n###### for phpmetrics.html option:\r\n   sidebar-links(right under description) \r\n   **link url** `http://192.168.56.103:8080/job/PHPUnit/ws/build/logs/quality.html`\r\n   **link text** `PhpMetrics report`\r\n   **link icon** `document.gif`\r\n        \r\nto understand the results have a look at: ([how-to-read-report](http://www.phpmetrics.org/documentation/how-to-read-report.html))\r\n\r\n\r\n## complete working solution `build.xml`[phpcompleteant]\r\n\r\n```xml\r\n    <project name=\"name-of-project\" default=\"full-build\" basedir=\".\">\r\n\r\n        <!--location of executables-->\r\n        <property name=\"pdepend\" value=\"/home/vagrant/.composer/vendor/bin/pdepend\"/>\r\n        <property name=\"phpcpd\" value=\"/home/vagrant/.composer/vendor/bin/phpcpd\"/>\r\n        <property name=\"phploc\" value=\"/home/vagrant/.composer/vendor/bin/phploc\"/>\r\n        <property name=\"phpunit\" value=\"/home/vagrant/.composer/vendor/bin/phpunit\"/>\r\n        <property name=\"phpmd\" value=\"/home/vagrant/.composer/vendor/bin/phpmd\"/>\r\n        <property name=\"phpdox\" value=\"/usr/bin/phpdox\"/>\r\n        <property name=\"phpcs\" value=\"/usr/bin/phpcs\"/>\r\n        <property name=\"phpmetrics\" value=\"/home/vagrant/.composer/vendor/bin/phpmetrics\"/>\r\n\r\n        <target name=\"full-build\"\r\n                depends=\"prepare, static-analysis, phpunit,phpdox,phpmetrics, -check-failure\"\r\n                description=\"Performs static analysis, runs tests and generates project dpcumentation\">\r\n        </target>\r\n\r\n        <target name=\"full-build-parallel\"\r\n                depends=\"prepare,static-analysis-parallel,phpunit,phpdox,phpmetrics, -check-failure\"\r\n                description=\"Performs static analysis (executing the tools in parallel), runs the tests, and generates project documentation\">\r\n        </target>\r\n\r\n        <target name=\"quick-build\"\r\n                depends=\"prepare, lint, phpunit-no-coverage\"\r\n                description=\"Performs a lint check and runs tests without generating codce coverage reports\">\r\n        </target>\r\n\r\n        <target name=\"static-analysis\"\r\n                depends=\"lint, phploc-ci, pdepend, phpmd-ci, phpcs-ci, phpcpd-ci\"\r\n                description=\"Performs static analysis\">\r\n        </target>\r\n\r\n        <target name=\"static-analysis-parallel\"\r\n                description=\"Performs static analysis (executing the tools in parallel)\">\r\n            <parallel threadCount=\"2\">\r\n                <sequential>\r\n                    <antcall target=\"pdepend\"/>\r\n                    <antcall target=\"phpmd-ci\"/>\r\n                </sequential>\r\n                <antcall target=\"lint\"/>\r\n                <antcall target=\"phpcpd-ci\"/>\r\n                <antcall target=\"phpcs-ci\"/>\r\n                <antcall target=\"phploc-ci\"/>\r\n            </parallel>\r\n        </target>\r\n\r\n        <!--remove directories of previous builds-->\r\n\r\n        <target name=\"clean\"\r\n                unless=\"clean.done\"\r\n                description=\"Cleanup build artifacts\">\r\n            <delete dir=\"${basedir}/build/api\"/>\r\n            <delete dir=\"${basedir}/build/coverage\"/>\r\n            <delete dir=\"${basedir}/build/logs\"/>\r\n            <delete dir=\"${basedir}/build/pdepend\"/>\r\n            <delete dir=\"${basedir}/build/phpdox\"/>\r\n            <property name=\"clean.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--create directories for logs, coverage etc.-->\r\n\r\n        <target name=\"prepare\"\r\n                unless=\"prepare.done\"\r\n                depends=\"clean\"\r\n                description=\"Prepare for build\">\r\n            <mkdir dir=\"${basedir}/build/api\"/>\r\n            <mkdir dir=\"${basedir}/build/coverage\"/>\r\n            <mkdir dir=\"${basedir}/build/logs\"/>\r\n            <mkdir dir=\"${basedir}/build/pdepend\"/>\r\n            <mkdir dir=\"${basedir}/build/phpdox\"/>\r\n            <property name=\"prepare.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--perform syntax check of source-code with php -l-->\r\n\r\n        <target name=\"lint\"\r\n                unless=\"lint.done\"\r\n                description=\"Perform syntax check of sourcecode files\">\r\n            <apply executable=\"php\" taskname=\"lint\">\r\n                <arg value=\"-l\" />\r\n\r\n                <fileset dir=\"${basedir}/build/src\">\r\n                    <include name=\"**/*.php\" />\r\n                    <modified />\r\n                </fileset>\r\n\r\n                <fileset dir=\"${basedir}/build/tests\">\r\n                    <include name=\"**/*.php\" />\r\n                    <modified />\r\n                </fileset>\r\n            </apply>\r\n\r\n            <property name=\"lint.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--count lines of code (command line usage)-->\r\n\r\n        <target name=\"phploc\"\r\n                unless=\"phploc.done\"\r\n                description=\"Measure project size using PHPLOC and print human readable output. Intended for usage on the command line.\">\r\n            <exec executable=\"${phploc}\" taskname=\"phploc\">\r\n                <arg value=\"--count-tests\" />\r\n                <arg path=\"${basedir}/src\" />\r\n                <arg path=\"${basedir}/tests\" />\r\n            </exec>\r\n\r\n            <property name=\"phploc.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--count lines of code (jenkins)-->\r\n\r\n        <target name=\"phploc-ci\"\r\n                unless=\"phploc.done\"\r\n                depends=\"prepare\"\r\n                description=\"Measure project size using PHPLOC and log result in CSV and XML format. Intended for usage within a continuous integration environment.\">\r\n            <exec executable=\"${phploc}\" taskname=\"phploc\">\r\n                <arg value=\"--count-tests\" />\r\n                <arg value=\"--log-csv\" />\r\n                <arg path=\"${basedir}/build/logs/phploc.csv\" />\r\n                <arg value=\"--log-xml\" />\r\n                <arg path=\"${basedir}/build/logs/phploc.xml\" />\r\n                <arg path=\"${basedir}/src\" />\r\n                <arg path=\"${basedir}/tests\" />\r\n            </exec>\r\n\r\n            <property name=\"phploc.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--performs static code analysis on a given source base, the sum of some statements or code fragments found in the analyzed source-->\r\n\r\n        <target name=\"pdepend\"\r\n                unless=\"pdepend.done\"\r\n                depends=\"prepare\"\r\n                description=\"Calculate software metrics using PHP_Depend and log result in XML format. Intended for usage within a continuous integration environment.\">\r\n            <exec executable=\"${pdepend}\" taskname=\"pdepend\">\r\n                <arg value=\"--summary-xml=${basedir}/build/logs/jdepend.xml\" />\r\n                <arg value=\"--jdepend-xml=${basedir}/build/logs/jdepend.xml\" />\r\n                <arg value=\"--jdepend-chart=${basedir}/build/pdepend/dependencies.svg\" />\r\n                <arg value=\"--overview-pyramid=${basedir}/build/pdepend/overview-pyramid.svg\" />\r\n                <arg path=\"${basedir}/src\" />\r\n            </exec>\r\n\r\n            <property name=\"pdepend.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--perform mess detection (command line version)-->\r\n\r\n        <target name=\"phpmd\"\r\n                unless=\"phpmd.done\"\r\n                description=\"Perform project mess detection using PHPMD and print human readable output. Intended for usage on the command line before committing.\">\r\n            <exec executable=\"${phpmd}\" taskname=\"phpmd\">\r\n                <arg path=\"${basedir}/src\" />\r\n                <arg value=\"text\" />\r\n                <arg path=\"${basedir}/phpmd.xml\" />\r\n            </exec>\r\n\r\n            <property name=\"phpmd.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--perform mess detection (jenkins)-->\r\n\r\n        <target name=\"phpmd-ci\"\r\n                unless=\"phpmd.done\"\r\n                depends=\"prepare\"\r\n                description=\"Perform project mess detection using PHPMD and log result in XML format. Intended for usage within a continuous integration environment.\">\r\n            <exec executable=\"${phpmd}\" taskname=\"phpmd\">\r\n                <arg path=\"${basedir}/src\" />\r\n                <arg value=\"xml\" />\r\n                <arg path=\"${basedir}/phpmd.xml\" />\r\n                <arg value=\"--reportfile\" />\r\n                <arg path=\"${basedir}/build/logs/pmd.xml\" />\r\n            </exec>\r\n\r\n            <property name=\"phpmd.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--find coding standard violations using CodeSniffer (command line version)-->\r\n\r\n        <target name=\"phpcs\"\r\n                unless=\"phpcs.done\"\r\n                description=\"Find coding standard violations using PHP_CodeSniffer and print human readable output. Intended for usage on the command line before committing.\">\r\n            <exec executable=\"${phpcs}\" taskname=\"phpcs\">\r\n                <arg value=\"--standard=PSR2\" />\r\n    <!--            <arg value=\"&#45;&#45;standard=PHPCS\" />\r\n                <arg value=\"&#45;&#45;standard=Zend\" />\r\n                <arg value=\"&#45;&#45;standard=PEAR\" />\r\n                <arg value=\"&#45;&#45;standard=MySource\" />\r\n                <arg value=\"&#45;&#45;standard=PSR1\" />\r\n                <arg value=\"&#45;&#45;standard=Squiz\" />-->\r\n                <arg value=\"--extensions=php\" />\r\n                <arg value=\"--ignore=autoload.php\" />\r\n                <arg path=\"${basedir}/src\" />\r\n                <arg path=\"${basedir}/tests\" />\r\n            </exec>\r\n\r\n            <property name=\"phpcs.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--find coding standard violations usind CodeSniffer (jenkins)-->\r\n\r\n        <target name=\"phpcs-ci\"\r\n                unless=\"phpcs.done\"\r\n                depends=\"prepare\"\r\n                description=\"Find coding standard violations using PHP_CodeSniffer and log result in XML format. Intended for usage within a continuous integration environment.\">\r\n            <exec executable=\"${phpcs}\" output=\"/dev/null\" taskname=\"phpcs\">\r\n                <arg value=\"--report=checkstyle\" />\r\n                <arg value=\"--report-file=${basedir}/build/logs/checkstyle.xml\" />\r\n                <arg value=\"--standard=PSR2\" />\r\n    <!--            <arg value=\"&#45;&#45;standard=PHPCS\" />\r\n                <arg value=\"&#45;&#45;standard=Zend\" />\r\n                <arg value=\"&#45;&#45;standard=PEAR\" />\r\n                <arg value=\"&#45;&#45;standard=MySource\" />\r\n                <arg value=\"&#45;&#45;standard=PSR1\" />\r\n                <arg value=\"&#45;&#45;standard=Squiz\" />-->\r\n                <arg value=\"--extensions=php\" />\r\n                <arg value=\"--ignore=autoload.php\" />\r\n                <arg path=\"${basedir}/src\" />\r\n                <arg path=\"${basedir}/tests\" />\r\n            </exec>\r\n\r\n            <property name=\"phpcs.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--find duplicate code (command line version)-->\r\n\r\n        <target name=\"phpcpd\"\r\n                unless=\"phpcpd.done\"\r\n                description=\"Find duplicate code using PHPCPD and print human readable output. Intended for usage on the command line before committing.\">\r\n            <exec executable=\"${phpcpd}\" taskname=\"phpcpd\">\r\n                <arg path=\"${basedir}/src\" />\r\n            </exec>\r\n\r\n            <property name=\"phpcpd.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--find duplicate code (jenkins)-->\r\n\r\n        <target name=\"phpcpd-ci\"\r\n                unless=\"phpcpd.done\"\r\n                depends=\"prepare\"\r\n                description=\"Find duplicate code using PHPCPD and log result in XML format. Intended for usage within a continuous integration environment.\">\r\n            <exec executable=\"${phpcpd}\" taskname=\"phpcpd\">\r\n                <arg value=\"--log-pmd\" />\r\n                <arg path=\"${basedir}/build/logs/pmd-cpd.xml\" />\r\n                <arg path=\"${basedir}/src\" />\r\n            </exec>\r\n\r\n            <property name=\"phpcpd.done\" value=\"true\"/>\r\n        </target>\r\n\r\n\r\n        <!--perform phpunit tests with coverage report-->\r\n\r\n        <target name=\"phpunit\"\r\n                unless=\"phpunit.done\"\r\n                depends=\"prepare\"\r\n                description=\"Run unit tests with PHPUnit\">\r\n            <exec executable=\"${phpunit}\" resultproperty=\"result.phpunit\" taskname=\"phpunit\">\r\n                <arg value=\"--configuration\"/>\r\n                <arg path=\"${basedir}/phpunit.xml\"/>\r\n            </exec>\r\n\r\n            <property name=\"phpunit.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--perform phpunit tests without coverage report-->\r\n\r\n        <target name=\"phpunit-no-coverage\"\r\n                unless=\"phpunit.done\"\r\n                depends=\"prepare\"\r\n                description=\"Run unit tests with PHPUnit (without generating code coverage reports)\">\r\n            <exec executable=\"${phpunit}\" failonerror=\"true\" taskname=\"phpunit\">\r\n                <arg value=\"--configuration\"/>\r\n                <arg path=\"${basedir}/phpunit.xml\"/>\r\n                <arg value=\"--no-coverage\"/>\r\n            </exec>\r\n\r\n            <property name=\"phpunit.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <!--generate documentation-->\r\n\r\n        <target name=\"phpmetrics\"\r\n                unless=\"phpmetrics.done\"\r\n                description=\"generate phpmetrics reports\">\r\n            <exec executable=\"${phpmetrics}\" taskname=\"phpmetrics\">\r\n                <arg value=\"--report-xml=${basedir}/build/logs/phpmetrics.xml\"/>\r\n                <arg value=\"--violations-xml=${basedir}/build/logs/violations.xml\"/>\r\n                <arg value=\"--report-html=${basedir}/build/logs/quality.html\"/>\r\n                <arg path=\"${basedir}/src\"/>\r\n            </exec>\r\n\r\n            <property name=\"phpmetrics.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <target name=\"phpdox\"\r\n                unless=\"phpdox.done\"\r\n                depends=\"phploc-ci,phpcs-ci,phpmd-ci\"\r\n                description=\"Generate project documentation using phpDox\">\r\n            <exec executable=\"${phpdox}\" dir=\"${basedir}\" taskname=\"phpdox\"/>\r\n\r\n            <property name=\"phpdox.done\" value=\"true\"/>\r\n        </target>\r\n\r\n        <target name=\"-check-failure\">\r\n            <fail message=\"PHPUnit did not finish successfully\">\r\n                <condition>\r\n                    <not>\r\n                        <equals arg1=\"${result.phpunit}\" arg2=\"0\"/>\r\n                    </not>\r\n                </condition>\r\n            </fail>\r\n        </target>\r\n    </project>\r\n```\r\n\r\n## Gradle Version[phpcompletegradle]\r\n```text\r\n    ext {\r\n    sourceDir = 'src'\r\n    testDir = 'tests'\r\n    reportDir = 'build/reports'\r\n    apiDir = 'build/reports/api'\r\n    }\r\n\r\n    task prepare(type: Delete) {\r\n        delete reportDir\r\n        delete apiDir\r\n        doLast {\r\n            file(reportDir).mkdirs()\r\n            file(apiDir).mkdirs()\r\n        }\r\n    }\r\n\r\n    def vendorBinDir = \"/home/vagrant/.composer/vendor/bin\"\r\n    def usrVendorBinDir = \"/usr/bin\"\r\n    def cmdTemplate = { cmd -> vendorBinDir + '/' + cmd}\r\n    def usrCmdTemplate = { cmd -> usrVendorBinDir + '/' + cmd}\r\n\r\n    task phploc(type: Exec, description: 'Measure project size using PHPLOC') {\r\n        executable cmdTemplate(name)\r\n            args \"--count-tests\", \"--log-csv\", \"./build/reports/phploc.csv\", \"--log-xml\", \"./build/reports/phploc.xml\", sourceDir, testDir\r\n    }\r\n\r\n    task pdepend(type: Exec, description: 'Calculate software metrics using PHPDepend') {\r\n        executable cmdTemplate(name)\r\n            args \"--summary-xml=./build/reports/jdepend-summary.xml\", \"--jdepend-xml=./build/reports/jdepend.xml\", \"--jdepend-chart=./build/reports/pdepend-dependencies.svg\", \"--overview-pyramid=./build/reports/pdepend-overview-pyramid.svg\", sourceDir\r\n    }\r\n\r\n    task phpmd (type : Exec, description : \"Perform project mess detection using PHPMD, and Creating a log file for the Continuous Integration Server\"){\r\n        executable cmdTemplate(name)\r\n            args sourceDir, \"xml\", \"./build/phpmd.xml\", \"--reportfile\", \"./build/reports/phpmd.xml\"\r\n    }\r\n\r\n    task phpcpd (type : Exec, description : \"Find duplicate code using PHPCPD and log result in XML format.\"){\r\n        executable cmdTemplate(name)\r\n            args \"--log-pmd\", \"build/reports/pmd-cpd.xml\", sourceDir\r\n    }\r\n\r\n    task phpunit (type : Exec, description : \"Run unit tests with PHPUnit\"){\r\n        executable cmdTemplate(name)\r\n            args \"-c\", \"build/phpunit.xml\"\r\n    }\r\n\r\n    task phpcs (type : Exec, description : \"Find Coding Standard Violations using PHP_CodeSniffer\"){\r\n        executable usrCmdTemplate(name)\r\n            args \"--report=checkstyle\", \"--report-file=./build/reports/checkstyle.xml\", \"--standard=PSR2\", \"--extensions=php\", \"--ignore=autoload.php\", sourceDir, testDir\r\n    }\r\n\r\n    task phpdox (type : Exec, description : \"Generating Docs enriched with pmd, checkstyle, phpcs,phpunit,phploc\"){\r\n        executable usrCmdTemplate(name)\r\n            args \"-f\", \"build/phpdox.xml\"\r\n    }\r\n\r\n    task phpmetrics (type : Exec, description : \"Geenrating PHPMetrics\"){\r\n        executable cmdTemplate(name)\r\n            args \"--report-xml=./build/reports/phpmetrics.xml\", \"--violations-xml=./build/reports/violations.xml\", \"--report-html=./build/reports/quality.html\", sourceDir\r\n    }\r\n\r\n    task fullbuild (dependsOn: [prepare, phploc, pdepend, phpmd, phpcpd, phpunit, phpcs, phpdox, phpmetrics])\r\n    phploc.mustRunAfter prepare\r\n    pdepend.mustRunAfter prepare\r\n    phpmd.mustRunAfter prepare\r\n    phpcpd.mustRunAfter prepare\r\n    phpunit.mustRunAfter prepare\r\n    phpcs.mustRunAfter prepare\r\n    phpdox.mustRunAfter prepare\r\n    phpmetrics.mustRunAfter prepare    \r\n```\r\n\r\n        \r\n# Java[java]\r\n\r\n## Ant Version[javaant]\r\n\r\n## download following .jar\r\n\r\n[junit.jar](http://bit.ly/My9IXz)\r\n[hamcrest-core.jar](http://bit.ly/1gbl25b)\r\n\r\nand put them into `lib` directory\r\n\r\nalso download Cobertura files and unpack to `lib/` \r\n\r\n[cobertura](http://sourceforge.net/projects/cobertura/files/latest/download?source=files)\r\n\r\n## ISSUES\r\ncobertura:\r\n\r\ncobertura-report doesn't take multiple directories as input (such as `tests` and `src` in `folder`)\r\n\r\njdepend:\r\n\r\n    BUILD FAILED\r\n    /var/lib/jenkins/workspace/Java/javaTests/build.xml:263: Problem: failed to create task or type jdepend\r\n    Cause: Could not load a dependent class jdepend/xmlui/JDepend\r\n           It is not enough to have Ant's optional JARs\r\n           you need the JAR files that the optional tasks depend upon.\r\n           Ant's optional task dependencies are listed in the manual.\r\n    Action: Determine what extra JAR files are needed, and place them in one of:\r\n            -/var/lib/jenkins/tools/hudson.tasks.Ant_AntInstallation/Ant/lib\r\n            -/var/lib/jenkins/.ant/lib\r\n            -a directory added on the command line with the -lib argument\r\n\r\n    Do not panic, this is a common problem.\r\n    The commonest cause is a missing JAR.\r\n\r\n    This is not a bug; it is a configuration problem\r\n\r\nThis is why i replaced jdepend with `javancss`  \r\n\r\n### full `build.xml`[javacompleteant]\r\n```xml\r\n    <project name=\"name-of-project\" default=\"full-build\" basedir=\".\">\r\n\r\n        <!--all properties-->\r\n        <property name=\"src.dir\" value=\"folder/src\"/>\r\n        <property name=\"tests.dir\" value=\"folder/tests\"/>\r\n        <property name=\"build.dir\" value=\"build\"/>\r\n        <property name=\"classes.dir\" value=\"${build.dir}/classes\"/>\r\n        <property name=\"jar.dir\" value=\"${build.dir}/jar\"/>\r\n        <property name=\"lib.dir\" value=\"lib\"/>\r\n        <property name=\"logs.dir\" value=\"logs\"/>\r\n        <property name=\"docs.dir\" value=\"docs\"/>\r\n        <property name=\"findbugs.dir\" value=\"${lib.dir}/findbugs\"/>\r\n        <property name=\"pmd.dir\" value=\"${lib.dir}/pmd\"/>\r\n        <!-- ===================== -->\r\n\r\n        <property name=\"checkstyle.jar.file\" value=\"lib/checkstyle-6.12.1-all.jar\"/>\r\n        <property name=\"javancss.dir\" value=\"lib/javancss-32.53\"/>\r\n\r\n        <!-- cobertura properties -->\r\n        <property name=\"cobertura.datafile\" value=\"${build.dir}/cobertura.ser\" />\r\n        <property name=\"cobertura.jar.dir\" value=\"${lib.dir}/cobertura-2.0.3\" />\r\n        <property name=\"cobertura.jar.file\" value=\"${lib.dir}/cobertura-2.0.3/cobertura-2.0.3.jar\" />\r\n        <property name=\"cobertura.dir\" value=\"cobertura\"/>\r\n        <property name=\"cob.instrumented.dir\" value=\"${cobertura.dir}/instrumented\" />\r\n        <!-- ===================== -->\r\n\r\n        <!--classpath to libraries like junit, cobertura etc.-->\r\n        <path id=\"classpath.lib\">\r\n            <pathelement location=\"${classes.dir}\" />\r\n            <fileset dir=\"${lib.dir}\">\r\n                <include name=\"**/*.jar\"/>\r\n            </fileset>\r\n        </path>\r\n        <!-- ===================== -->\r\n\r\n        <!--junit tests including cobertura reports-->\r\n        <path id=\"cobertura.lib\">\r\n            <fileset dir=\"${cobertura.jar.dir}\">\r\n                <include name=\"cobertura-2.0.3.jar\"/>\r\n                <include name=\"lib/**/*.jar\"/>\r\n            </fileset>\r\n        </path>\r\n        <!-- ===================== -->\r\n\r\n        <!--run full build consisting of following targets-->\r\n        <target name=\"full-build\"\r\n                depends=\"prepare, coverage-report, javadoc, checkstyle, jar, findbugs, pmd, javancss\"\r\n                description=\"test build for java applications\">\r\n        </target>\r\n        <!-- ===================== -->\r\n\r\n        <!--remove files & directories of previous builds-->\r\n        <target name=\"clean\"\r\n                unless=\"clean.done\"\r\n                description=\"Cleanup build artifacts\">\r\n            <echo>=== CLEAN-UP OF BUILD ARTIFACTS FROM PREVIOUS BUILDS ===</echo>\r\n            <delete dir=\"${build.dir}\"/>\r\n            <delete dir=\"${classes.dir}\"/>\r\n            <delete dir=\"${logs.dir}\"/>\r\n            <delete dir=\"${docs.dir}\"/>\r\n\r\n            <delete dir=\"${cobertura.dir}\" />\r\n            <delete dir=\"${cob.instrumented.dir}\" />\r\n            <delete dir=\"${logs.dir}/cobertura\" />\r\n            <delete dir=\"${logs.dir}/cobertura-xml\" />\r\n            <delete dir=\"${logs.dir}/cobertura-summary-xml\" />\r\n            <delete dir=\"${logs.dir}/cobertura-html\" />\r\n            <delete file=\"cobertura.ser\"/>\r\n\r\n            <property name=\"clean.done\" value=\"true\"/>\r\n        </target>\r\n        <!-- ===================== -->\r\n\r\n        <!--create directories for logs, coverage etc.-->\r\n        <target name=\"prepare\"\r\n                unless=\"prepare.done\"\r\n                depends=\"clean\"\r\n                description=\"Prepare for build\">\r\n            <echo>=== PREPARATION OF FOLDER-STRUCTURE ===</echo>\r\n            <mkdir dir=\"${build.dir}\"/>\r\n            <mkdir dir=\"${classes.dir}\"/>\r\n            <mkdir dir=\"${logs.dir}\"/>\r\n            <mkdir dir=\"${docs.dir}\"/>\r\n            <mkdir dir=\"${jar.dir}\"/>\r\n\r\n            <mkdir dir=\"${cobertura.dir}\" />\r\n            <mkdir dir=\"${cob.instrumented.dir}\" />\r\n            <mkdir dir=\"${logs.dir}/cobertura\" />\r\n\r\n            <property name=\"prepare.done\" value=\"true\"/>\r\n        </target>\r\n        <!-- ===================== -->\r\n\r\n        <!--compile sources and tests-->\r\n        <target name=\"compile\"\r\n                depends=\"prepare\">\r\n            <echo>=== COMPILE ===</echo>\r\n            <echo>=== COMPILING ${src.dir} FILES ... ===</echo>\r\n            <javac debug=\"true\" includeantruntime=\"false\" srcdir=\"${src.dir}\" destdir=\"${classes.dir}\">\r\n            </javac>\r\n            <echo>=== COMPILE ===</echo>\r\n            <echo>=== COMPILING ${tests.dir} FILES ... ===</echo>\r\n            <javac includeantruntime=\"false\" srcdir=\"${tests.dir}\" destdir=\"${classes.dir}\">\r\n                <classpath>\r\n                    <pathelement location=\"${lib.dir}/junit-4.12.jar\" />\r\n                    <pathelement location=\"${lib.dir}/hamcrest-core-1.3.jar\" />\r\n                </classpath>\r\n            </javac>\r\n        </target>\r\n        <!-- ===================== -->\r\n\r\n        <target name=\"jar\" depends=\"compile\">\r\n            <jar destfile=\"${jar.dir}/test.jar\" basedir=\"${classes.dir}\"/>\r\n        </target>\r\n\r\n        <!--setting up cobertura task and instrument-->\r\n        <taskdef classpathref=\"cobertura.lib\"\r\n                 resource=\"tasks.properties\"/>\r\n\r\n        <target name=\"instrument\" depends=\"compile\">\r\n            <cobertura-instrument todir=\"${cob.instrumented.dir}\" >\r\n                <fileset dir=\"${classes.dir}\">\r\n                    <include name=\"**/*.class\"/>\r\n                </fileset>\r\n            </cobertura-instrument>\r\n        </target>\r\n        <!-- ===================== -->\r\n\r\n        <!--performing cobertura coverage-test after junit test-->\r\n        <target name=\"coverage-test\"\r\n                depends=\"instrument\">\r\n\r\n            <junit dir=\"./\" failureproperty=\"test.failure\" printsummary=\"yes\" fork=\"true\">\r\n                <classpath location=\"${cobertura.jar.file}\"/>\r\n                <classpath location=\"${cob.instrumented.dir}\"/>\r\n                <classpath>\r\n                    <path refid=\"classpath.lib\"/>\r\n                </classpath>\r\n                <formatter type=\"xml\" />\r\n                <batchtest fork=\"yes\" todir=\"${logs.dir}\">\r\n                    <fileset dir=\"${cob.instrumented.dir}\">\r\n                        <include name=\"**/*Test*\"/>\r\n                    </fileset>\r\n                </batchtest>\r\n\r\n                <!-- cobertura-specific -->\r\n                <sysproperty key=\"net.sourceforge.cobertura.datafile\" file=\"cobertura.ser\" />\r\n                <classpath refid=\"cobertura.lib\" />\r\n            </junit>\r\n        </target>\r\n        <!-- ===================== -->\r\n\r\n        <!--make html report of cobertura-->\r\n        <target name=\"coverage-report\"\r\n                depends=\"coverage-test\">\r\n            <echo>=== PERFORMING COVERAGE-REPORT ===</echo>\r\n            <cobertura-report format=\"html\" srcdir=\"folder\" destdir=\"${logs.dir}/cobertura\">\r\n                <fileset dir=\"${src.dir}\">\r\n                    <include name=\"**/*.java\"/>\r\n                </fileset>\r\n                <fileset dir=\"${tests.dir}\">\r\n                    <include name=\"**/*.java\"/>\r\n                </fileset>\r\n            </cobertura-report>\r\n        </target>\r\n        <!-- ===================== -->\r\n\r\n        <!--javadoc-->\r\n        <target name=\"javadoc\"\r\n                depends=\"compile\"\r\n                description=\"generate javadoc\">\r\n            <javadoc packagenames=\"MyUnit\"\r\n                     sourcepath=\"${src.dir}\"\r\n                     destdir=\"${docs.dir}\"\r\n                     failonerror=\"false\"\r\n                     use=\"true\"\r\n                     author=\"true\">\r\n                <doctitle><![CDATA[<h1>DiOmega Test</h1>]]></doctitle>\r\n                <bottom><![CDATA[<i>Copyright &#169; 2015 DiOmega. All Rights Reserved.</i>]]></bottom>\r\n                <fileset dir=\"${src.dir}\">\r\n                    <include name=\"**/*.java\"/>\r\n                </fileset>\r\n            </javadoc>\r\n        </target>\r\n        <!-- ===================== -->\r\n\r\n        <!--checkstyle-->\r\n        <target name=\"checkstyle\"\r\n                depends=\"compile\">\r\n            <taskdef resource=\"com/puppycrawl/tools/checkstyle/ant/checkstyle-ant-task.properties\"\r\n                     classpath=\"${lib.dir}/checkstyle-6.12.1-all.jar\"/>\r\n            <checkstyle config=\"${lib.dir}/checkstyle_styles/sun_checks.xml\"\r\n                        failOnViolation=\"false\">\r\n                <fileset dir=\"${src.dir}\" includes=\"**/*.java\"/>\r\n                <formatter type=\"xml\" toFile=\"${logs.dir}/checkstyle_errors.xml\"/>\r\n            </checkstyle>\r\n        </target>\r\n        <!-- ===================== -->\r\n\r\n        <!--findbugs-->\r\n        <path id=\"findbugs.classpath\">\r\n            <pathelement location=\"${findbugs.dir}/lib/findbugs-ant.jar\"/>\r\n            <pathelement location=\"${findbugs.dir}/lib/findbugs.jar\"/>\r\n        </path>\r\n        <taskdef name=\"findbugs\" classname=\"edu.umd.cs.findbugs.anttask.FindBugsTask\" classpathref=\"findbugs.classpath\" />\r\n        <target name=\"findbugs\"\r\n                depends=\"jar\">\r\n            <findbugs home=\"${findbugs.dir}\"\r\n                      output=\"xml\" outputFile=\"${logs.dir}/findbugs_report.xml\">\r\n                <auxClasspath>\r\n                    <fileset file=\"${lib.dir}/junit-4.5.jar\" />\r\n                </auxClasspath>\r\n                <sourcePath path=\"${src.dir}\"/>\r\n                <fileset dir=\"${src.dir}\">\r\n                    <include name=\"**/*.java\"/>\r\n                </fileset>\r\n                <class location=\"${jar.dir}\"/>\r\n            </findbugs>\r\n        </target>\r\n        <!-- ===================== -->\r\n\r\n\r\n        <!-- PMD -->\r\n        <path id=\"pmd.classpath\">\r\n            <pathelement location=\"${build}\" />\r\n            <fileset dir=\"${pmd.dir}/lib/\">\r\n                <include name=\"*.jar\" />\r\n            </fileset>\r\n        </path>\r\n        <taskdef name=\"pmd\" classname=\"net.sourceforge.pmd.ant.PMDTask\"\r\n                 classpathref=\"pmd.classpath\" />\r\n        <target name=\"pmd\">\r\n\r\n            <pmd>\r\n                <formatter type=\"xml\" toFile=\"${logs.dir}/pmd_report.xml\" />\r\n                <fileset dir=\"${src.dir}\">\r\n                    <include name=\"**/*.java\" />\r\n                </fileset>\r\n                <ruleset>rulesets/java/basic.xml</ruleset>\r\n                <ruleset>rulesets/java/braces.xml</ruleset>\r\n                <ruleset>rulesets/java/comments.xml</ruleset>\r\n                <ruleset>rulesets/java/comments.xml</ruleset>\r\n                <ruleset>rulesets/java/empty.xml</ruleset>\r\n                <ruleset>rulesets/java/controversial.xml</ruleset>\r\n                <ruleset>rulesets/java/coupling.xml</ruleset>\r\n                <ruleset>rulesets/java/design.xml</ruleset>\r\n                <ruleset>rulesets/java/imports.xml</ruleset>\r\n                <ruleset>rulesets/java/logging-java.xml</ruleset>\r\n                <ruleset>rulesets/java/migrating.xml</ruleset>\r\n                <ruleset>rulesets/java/naming.xml</ruleset>\r\n                <ruleset>rulesets/java/optimizations.xml</ruleset>\r\n                <ruleset>rulesets/java/strings.xml</ruleset>\r\n                <ruleset>rulesets/java/sunsecure.xml</ruleset>\r\n                <ruleset>rulesets/java/unusedcode.xml</ruleset>\r\n                <ruleset>rulesets/java/unnecessary.xml</ruleset>\r\n            </pmd>\r\n        </target>\r\n        <!-- ===================== -->\r\n\r\n        <!--JavaNCSS-->\r\n        <target name=\"javancss\" depends=\"compile\">\r\n            <taskdef name=\"javancss\"\r\n                     classname=\"javancss.JavancssAntTask\">\r\n                <classpath>\r\n                    <fileset dir=\"${javancss.dir}/lib\" includes=\"*.jar\"/>\r\n                </classpath>\r\n            </taskdef>\r\n\r\n            <javancss srcdir=\"${src.dir}\"\r\n                      generateReport=\"true\"\r\n                      outputfile=\"${logs.dir}/javancss_metrics.xml\"\r\n                      format=\"xml\"/>\r\n        </target>\r\n        <!-- ===================== -->\r\n\r\n        <!--jdepend-->\r\n     <!--   <target name=\"jdepend\">\r\n\r\n            <jdepend format=\"xml\" outputfile=\"${logs.dir}/jdepend-report.xml\">\r\n                <classpath>\r\n                    <pathelement location=\"${classes.dir}\" />\r\n                    <pathelement location=\"${lib.dir}/jdepend-2.9.1.jar\" />\r\n                </classpath>\r\n                <classpath location=\"${classes.dir}\" />\r\n            </jdepend>\r\n\r\n            <style basedir=\"docs\" destdir=\"docs\"\r\n                   includes=\"jdepend-report.xml\"\r\n                   style=\"${lib.dir}/jdepend.xsl\" />\r\n\r\n        </target>-->\r\n        <!-- ===================== -->\r\n\r\n    </project>\r\n```\r\n\r\n### full `build.gradle`[javacompletegradle]\r\n    \r\n```text    \r\n    /*\r\n    *\r\n    -   for gradle only the /lib/checkstyle_styles/ is needed\r\n    -   rest of lib folder is for ant version\r\n    *\r\n    */\r\n\r\n    plugins {\r\n      id \"net.saliman.cobertura\" version \"2.2.8\"\r\n    }\r\n\r\n    println '---PROJECTFOLDER---'\r\n    println project.projectDir\r\n\r\n    apply plugin: 'java'\r\n    apply plugin: 'findbugs'\r\n    apply plugin: 'pmd'\r\n    apply plugin: 'jdepend'\r\n    apply plugin: 'checkstyle'\r\n\r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n\r\n    sourceSets {\r\n        main {\r\n            java {\r\n                srcDirs = ['folder/src']\r\n            }\r\n        }\r\n        test {\r\n            java {\r\n                srcDirs = ['folder/tests']\r\n            }\r\n        }\r\n    }\r\n\r\n    dependencies {\r\n        testCompile 'junit:junit:4.12'\r\n\r\n        /*\r\n        -   stevesaliman/gradle-cobertura-plugin\r\n        -   ClassNotFoundException on 2.2.7 but 2.2.6\r\n        -   https://github.com/stevesaliman/gradle-cobertura-plugin/issues/75\r\n        -   you need to add the following testRuntime´s\r\n        */\r\n        testRuntime 'org.slf4j:slf4j-nop:1.7.12' // for cobertura\r\n    }\r\n\r\n    cobertura {\r\n        coverageFormats = ['html', 'xml']\r\n        coverageReportDir = new File(\"$buildDir/reports/cobertura\")\r\n    }\r\n\r\n    findbugs {\r\n        sourceSets = [sourceSets.main]\r\n        ignoreFailures = true\r\n        reportsDir = file(\"$buildDir/reports/findbugsReports\")\r\n        effort = \"max\"\r\n        reportLevel = \"high\"\r\n    }\r\n\r\n    pmd {\r\n        sourceSets = [sourceSets.main]\r\n        ignoreFailures = true\r\n        reportsDir = file(\"$buildDir/reports/pmdReports\")\r\n        ruleSets = [\r\n            'java-basic',\r\n            'java-braces',\r\n            'java-comments',\r\n            'java-empty',\r\n            'java-controversial',\r\n            'java-coupling',\r\n            'java-design',\r\n            'java-imports',\r\n            'java-logging-java',\r\n            'java-migrating',\r\n            'java-naming',\r\n            'java-optimizations',\r\n            'java-strings',\r\n            'java-sunsecure',\r\n            'java-unusedcode',\r\n            'java-unnecessary'\r\n            ]\r\n    }\r\n\r\n    jdepend {\r\n        sourceSets = [sourceSets.main]\r\n        ignoreFailures = true\r\n        reportsDir = file(\"$buildDir/reports/jdependReports\")\r\n    }\r\n\r\n    checkstyle {\r\n        sourceSets = [sourceSets.main]\r\n        showViolations = false\r\n        reportsDir = file(\"$buildDir/reports/checkstyleReports\")\r\n        configFile = file(\"${project.projectDir}/lib/checkstyle_styles/google_checks.xml\")\r\n    }\r\n\r\n    task javaDocs(type: Javadoc) {\r\n      source = sourceSets.main.allJava\r\n    }\r\n```\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}